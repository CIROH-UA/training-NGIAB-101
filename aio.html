<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>NGIAB 101: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      NGIAB 101
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            NGIAB 101
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
<li><a class="dropdown-item" href="troubleshooting.html"></a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  NGIAB 101
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="installation.html">2. Installation and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="data-preparation.html">3. Data Preparation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="model-execution.html">4. Model Execution</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="evaluation.html">5. Evaluation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="visualization.html">6. Visualization</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="advanced-topics.html">7. Advanced Topics</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
<li><a href="troubleshooting.html"></a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introduction</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the NextGen Framework?</li>
<li>What is NextGen in a Box (NGIAB)?</li>
<li>What is containerization?</li>
<li>Why should I use NGIAB?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Identify key components of the NGIAB architecture</li>
<li>Describe NGIAB’s role in the NextGen Framework</li>
<li>Determine use cases for NGIAB</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction-to-nextgen">Introduction to NextGen<a class="anchor" aria-label="anchor" href="#introduction-to-nextgen"></a>
</h2>
<hr class="half-width">
<p>The U.S. National Water Model (NWM) provides hydrologic predictions
for over 3.4 million miles of rivers and streams across the United
States (<a href="https://doi.org/10.1111/1752-1688.13184" class="external-link">Cosgrove et
al., 2024</a>). <strong>The Next Generation Water Resources Modeling
Framework (NextGen) is an advancement of the NWM</strong>, setting the
stage for a more flexible modeling approach. NextGen promotes model
interoperability and standardizes data workflows, allowing the
integration of various hydrologic models tailored to specific regional
processes, providing key flexibility needed for future success with
continental-scale modeling. The NextGen framework continues to undergo
testing, improvements, and updates through research efforts at the NOAA
Cooperative Institute for Research to Operations in Hydrology
(CIROH).</p>
</section><section><h2 class="section-heading" id="what-is-ngiab">What is NGIAB?<a class="anchor" aria-label="anchor" href="#what-is-ngiab"></a>
</h2>
<hr class="half-width">
<p>Managing NextGen’s complex software ecosystem remains challenging.
The NextGen framework’s implementation requires handling numerous
software libraries and dependencies, which can be a barrier for users
unfamiliar with its technical requirements. To bridge this gap in
accessibility of the NextGen framework for community use, we developed
NextGen In A Box (NGIAB)—an open-source, containerized solution that
encapsulates the NextGen framework and essential modeling components
into a self-contained, reproducible application. By eliminating manual
configuration burdens, NGIAB enables researchers to focus on scientific
inquiry rather than software setup and maintenance. Beyond simplifying
deployment of the NextGen Framework, NGIAB fosters collaboration among
researchers, academic institutions, and government agencies by providing
a scalable, community-driven modeling environment. <strong>In essence,
NGIAB provides a unified solution that powers NextGen models, including
future versions of the NWM starting with version 4.</strong></p>
</section><section><h2 class="section-heading" id="containerization">Containerization<a class="anchor" aria-label="anchor" href="#containerization"></a>
</h2>
<hr class="half-width">
<p>Containerization effectively addresses compatibility issues and
hardware variation challenges by <strong>encapsulating applications,
their dependencies, and runtime environments into a single, portable
unit</strong>. This ensures consistent execution across diverse
computing environments, regardless of differences in hardware or
software configurations. Unlike traditional virtual machines (VMs),
which require separate guest operating systems and additional resource
allocation, containers share the host system’s kernel, reducing overhead
and improving computational efficiency. This lightweight approach allows
for rapid deployment, scalability, and reproducibility, making it an
ideal solution for complex scientific and engineering applications.</p>
<p>NGIAB leverages Docker (<a href="https://doi.org/10.1145/2723872.2723882" class="external-link">Boettiger, 2015</a>) and
Singularity (<a href="https://www.researchgate.net/publication/236160050_An_Overview_of_the_Singularity_Project" class="external-link">Hunt
et al., 2005</a>) to streamline deployment, ensuring cross-platform
compatibility, accessibility, reproducibility, and ease of use. Although
Docker is a common approach for containerizing software dependencies, we
also provide a Singularity option for HPC environments because it is
specifically designed to integrate with existing batch job schedulers
and optimize performance for HPC applications. Unlike Docker,
Singularity allows users to run containers without requiring root
privileges, making it more secure and better suited for multi-user HPC
environments where system administrators need to maintain strict
security protocols.</p>
</section><section><h2 class="section-heading" id="architectural-components">Architectural Components<a class="anchor" aria-label="anchor" href="#architectural-components"></a>
</h2>
<hr class="half-width">
<p>NGIAB is designed as a multi-layered containerized tool that
encapsulates the NextGen framework and many components relevant to the
NWM within a reproducible environment.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-1.png" alt="Figure 1" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 1: Architecture of the NGIAB, highlighting
its core modeling foundation, CI/CD pipelines, containerized tools and
supporting technologies.</em></td>
</tr></tbody>
</table>
<p>Figure 1 illustrates the layered architecture of NGIAB. At its core
(Layer 1) lies a suite of integrated hydrological modeling components
and hydrofabric, designed to work together within the NextGen framework.
This core is wrapped by the CI/CD Pipeline layer (Layer 2), which
leverages GitHub Actions to ensure automated testing, integration, and
deployment capabilities for reproducible workflows. The NGIAB
Containerization layer (Layer 3) provides the containerized environment
and essential configuration tools. The outermost layer (Layer 4),
Technologies &amp; Methods, provides broader infrastructure, best
practices, and support for deployment across different computing
environments (local, cloud, HPC), and facilitates community engagement
and contribution. <strong>The architecture emphasizes four key aspects:
core hydrological modeling framework capabilities, simplified access to
modeling tools, facilitation of rapid development and reliability, and
integration of supportive tools and practices.</strong></p>
</section><section><h2 class="section-heading" id="extensions-of-ngiab">Extensions of NGIAB<a class="anchor" aria-label="anchor" href="#extensions-of-ngiab"></a>
</h2>
<hr class="half-width">
<p>Several extensions of NGIAB are already integrated with
NextGen-related tools like Data Preprocess, Tools for Exploratory
Evaluation in Hydrologic Research (TEEHR), and Data Visualizer (Figure
2). These extensions will be discussed in later episodes.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-2.png" alt="Figure 2" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 2: Workflow of data acquisition, model
execution, evaluation, and results visualization.</em></td>
</tr></tbody>
</table></section><section><h2 class="section-heading" id="example-applications">Example Applications<a class="anchor" aria-label="anchor" href="#example-applications"></a>
</h2>
<hr class="half-width">
<p>Steps common to all hydrologic modeling frameworks include data
collection and preparation, framework setup and model execution,
evaluation, results visualization, and calibration. Researchers can use
NGIAB to run simulations for their basins of interest. <em>Note that
calibration is not yet an integrated capability within NGIAB.</em>
Figures 3 and 4 show examples of how NGIAB and its extensions have been
used to simulate streamflow for five years in the Provo River basin.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-4.png" alt="Figure 3" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 3: Map showing the drainage basin used as
our demonstration case, the Provo River near Woodland, UT
(Gage-10154200). This view shows the NGIAB interactive preprocessing
tool. The highlighted region (light orange area; downstream-most basin
in pink) represents the specific study basin, illustrating the river
network (blue lines), sub-basins (orange), and surrounding USGS gaging
stations (black dots).</em></td>
</tr></tbody>
</table>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-5.png" alt="Figure 4" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 4: Map showing the geospatial
visualization using the Data Visualizer for a selected outlet point as
well as displaying a time series plot between observed (labeled “USGS”;
blue line) and simulated (labelled “ngen”; orange line) with the
performance metrics (KGE, NSE, and relative bias). The Visualizer can
also show the performance of the NWM 3.0 compared to the observed time
series.</em></td>
</tr></tbody>
</table></section><section><h2 class="section-heading" id="why-should-i-use-ngiab">Why should I use NGIAB?<a class="anchor" aria-label="anchor" href="#why-should-i-use-ngiab"></a>
</h2>
<hr class="half-width">
<p>To maximize the potential benefit of this flexible framework,
<strong>community contribution is essential</strong>, as experts in
various models and geographic areas will be needed to address the
complex hydrologic challenges of continental scale operational
simulation. NGIAB makes this possible in research settings by easing
setup and providing easy-to-run demos, allowing hydrologists and
researchers to quickly configure and modify localized water models. Its
open-source framework allows hydrologists and stakeholders to easily
inspect, compare, and refine model predictions. Its lightweight
container size also empowers hydrologists to execute large-scale
simulations efficiently and reduce computational bottlenecks. By
strengthening collaboration across research teams, NGIAB will help drive
the evolution of community-scale water modeling and accelerate the
transition from academic innovation to real-world operational use.</p>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Here are some self-assessment questions for discussion or
consideration:</p>
<ul>
<li>Do I understand how NGIAB fits into the NextGen Framework?</li>
<li>What are the key design features and extensions of NGIAB?</li>
<li>How can I use NGIAB to answer my research questions?</li>
<li>How can I use NGIAB to contribute my expertise to the NextGen
Framework?</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The Next Generation Water Resources Modeling Framework (NextGen)
advances the National Water Model with flexible, modular, and regionally
adaptive hydrologic modeling at national scale.</li>
<li>NextGen In A Box (NGIAB) packages the complex NextGen system into an
open-source, containerized application for easier access and
usability.</li>
<li>NGIAB uses Docker and Singularity for portability across local
machines, cloud platforms, and HPC systems.</li>
<li>NGIAB’s multi-layered architecture integrates hydrologic modeling
tools, CI/CD pipelines, and supportive technologies and is complemented
by a suite of extensions that allow for end-to-end workflows from data
acquisition to visualization and evaluation.</li>
<li>NGIAB fosters an open ecosystem where researchers, developers, and
practitioners actively contribute new models, extensions, and
workflows.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-installation"><p>Content from <a href="installation.html">Installation and Setup</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/installation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<section><h2 class="section-heading" id="questions">Questions<a class="anchor" aria-label="anchor" href="#questions"></a>
</h2>
<hr class="half-width">
<ul>
<li>How do I install and set up NGIAB?</li>
<li>What are the prerequisites for running NGIAB?</li>
<li>How do I verify my installation?</li>
</ul></section><section><h2 class="section-heading" id="objectives">Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h2>
<hr class="half-width">
<ul>
<li>Install and verify Docker</li>
<li>Set up NGIAB project directories</li>
<li>Run a sample NGIAB simulation</li>
</ul></section><section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>This lesson guides you through installing and setting up NGIAB, a
containerized solution designed to simplify running the NextGen modeling
framework locally. NGIAB leverages Docker containers to ensure
consistent and reproducible simulations.</p>
</section><section><h2 class="section-heading" id="system-requirements">System Requirements<a class="anchor" aria-label="anchor" href="#system-requirements"></a>
</h2>
<hr class="half-width">
<p>Before installing NGIAB, ensure you have:</p>
<ul>
<li>
<strong>Operating System:</strong> Windows (with WSL), macOS, or
Linux<br>
</li>
<li>
<strong>Software:</strong> Docker, Git<br>
</li>
<li>
<strong>Recommended Minimum RAM:</strong> 8 GB</li>
</ul></section><section><h2 class="section-heading" id="docker-installation">Docker Installation<a class="anchor" aria-label="anchor" href="#docker-installation"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="windows-wsl">Windows (WSL)<a class="anchor" aria-label="anchor" href="#windows-wsl"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<p>Install Windows Subsystem for Linux (WSL):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">--install</span></span></code></pre>
</div>
</li>
<li><p>Install Docker Desktop from Docker’s official website.</p></li>
<li><p>Launch Docker Desktop and open WSL terminal as
administrator.</p></li>
<li>
<p>Verify Docker installation:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">docker</span> run hello-world</span></code></pre>
</div>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="macos">macOS<a class="anchor" aria-label="anchor" href="#macos"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Install Docker Desktop from Docker’s official Mac
installer.</p></li>
<li><p>Launch Docker Desktop.</p></li>
<li>
<p>Verify Docker installation:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">docker</span> run hello-world</span></code></pre>
</div>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="linux">Linux<a class="anchor" aria-label="anchor" href="#linux"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Install Docker by following the official Docker guide.</p></li>
<li>
<p>Start Docker service and verify:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">docker</span> run hello-world</span></code></pre>
</div>
</li>
</ol>
</div>
</section><section><h2 class="section-heading" id="challenge-1-verify-docker">✅ Challenge 1: Verify Docker<a class="anchor" aria-label="anchor" href="#challenge-1-verify-docker"></a>
</h2>
<hr class="half-width">
<p>Run the command below:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">docker</span> ps <span class="at">-a</span></span></code></pre>
</div>
<p>Confirm it executes without errors. If errors occur, revisit Docker
installation steps.</p>
<div class="section level3">
<h3 id="solution">Solution<a class="anchor" aria-label="anchor" href="#solution"></a>
</h3>
<p>If <code>docker ps -a</code> fails, ensure Docker Desktop is running,
or Docker service is active on Linux:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="ngiab-setup">NGIAB Setup<a class="anchor" aria-label="anchor" href="#ngiab-setup"></a>
</h2>
<hr class="half-width">
<p>These steps will lead you through the process of running NGIAB with a
set of pre-configured input data and realization files.</p>
<div class="section level3">
<h3 id="step-1-create-project-directory">Step 1: Create Project Directory<a class="anchor" aria-label="anchor" href="#step-1-create-project-directory"></a>
</h3>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> NextGen/ngen-data</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">cd</span> NextGen/ngen-data</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="step-2-download-sample-data">Step 2: Download Sample Data<a class="anchor" aria-label="anchor" href="#step-2-download-sample-data"></a>
</h3>
<p>Choose one of the following datasets:</p>
<p><strong>Option 1: Provo River (AWI-009)</strong></p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">wget</span> https://ciroh-ua-ngen-data.s3.us-east-2.amazonaws.com/AWI-009/AWI_16_10154200_009.tar.gz</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> AWI_16_10154200_009.tar.gz</span></code></pre>
</div>
<p><strong>Option 2: AWI-007</strong></p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">wget</span> https://ciroh-ua-ngen-data.s3.us-east-2.amazonaws.com/AWI-007/AWI_16_2863657_007.tar.gz</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> AWI_16_2863657_007.tar.gz</span></code></pre>
</div>
<p><strong>Option 3: AWI-008 (with LSTM)</strong></p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">wget</span> https://ciroh-ua-ngen-data.s3.us-east-2.amazonaws.com/AWI-008/AWI_16_2863806_008.tar.gz</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> AWI_16_2863806_008.tar.gz</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="step-3-clone-and-run-ngiab">Step 3: Clone and Run NGIAB<a class="anchor" aria-label="anchor" href="#step-3-clone-and-run-ngiab"></a>
</h3>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">cd</span> ../  <span class="co"># back to NextGen folder</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/CIROH-UA/NGIAB-CloudInfra.git</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="bu">cd</span> NGIAB-CloudInfra</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="ex">./guide.sh</span></span></code></pre>
</div>
<p>The interactive <code>guide.sh</code> script will prompt you to
select input data, processing modes, and will initiate your
simulation.</p>
</div>
<div class="section level3">
<h3 id="directory-structure-ngen-run">Directory Structure (<code>ngen-run/</code>)<a class="anchor" aria-label="anchor" href="#directory-structure-ngen-run"></a>
</h3>
<pre><code>ngen-run/
├── config/
├── forcings/
├── lakeout/ (optional)
├── metadata/ (auto-generated, do not edit)
├── outputs/
└── restart/ (optional)
</code></pre>
<blockquote>
<p><strong>Tip:</strong> Always run a quick simulation with provided
sample datasets to verify the successful setup of NGIAB.</p>
</blockquote>
</div>
</section><section><h2 class="section-heading" id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>Ensure Docker is running before executing
<code>guide.sh</code>.</p></li>
<li><p>For permission errors on Linux, run Docker commands with
<code>sudo</code> or add your user to the Docker group:</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">${USER}</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">newgrp</span> docker</span></code></pre>
</div>
<div class="section level3">
<h3 id="check-did-you-download-the-dataset">Check: Did You Download the Dataset?<a class="anchor" aria-label="anchor" href="#check-did-you-download-the-dataset"></a>
</h3>
<p>Run this command:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">ls</span>  ~/NextGen/ngen-data</span></code></pre>
</div>
<p>You should see a folder like:</p>
<pre><code><span><span class="va">AWI_16_10154200_009</span></span></code></pre>
<p>If you see it, your dataset was downloaded and extracted
correctly.</p>
<p>If you see nothing or just the <code>.tar.gz</code> file, run the
following again:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">tar</span>  <span class="at">-xf</span>  AWI_16_10154200_009.tar.gz</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="are-you-in-the-right-directory">Are You in the Right Directory?<a class="anchor" aria-label="anchor" href="#are-you-in-the-right-directory"></a>
</h3>
<p>Before running any script, always check your current folder:</p>
<pre><code><span><span class="va">pwd</span></span></code></pre>
<p>You <strong>should see something like</strong>:</p>
<pre><code>/home/yourname/NextGen/NGIAB-CloudInfra</code></pre>
<p>If not, move into the folder:</p>
<pre><code>cd ~/NextGen/NGIAB-CloudInfra</code></pre>
</div>
</section><section><h2 class="section-heading" id="additional-resources">Additional Resources<a class="anchor" aria-label="anchor" href="#additional-resources"></a>
</h2>
<hr class="half-width">
<p>Are you interested in customizing your run with your own catchments
and run configurations? Do you want to explore more functionalities of
NGIAB? Check out the following episodes:</p>
<ul>
<li><p>Data Preparation - NGIAB Data Preprocessor</p></li>
<li><p>Evaluation - NGIAB TEEHR Integration</p></li>
<li><p>Visualization - Data Visualizer</p></li>
</ul></section><section><h2 class="section-heading" id="key-points">Key Points<a class="anchor" aria-label="anchor" href="#key-points"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>NGIAB simplifies NextGen framework deployment through
Docker.</p></li>
<li><p>Use <code>guide.sh</code> for interactive configuration and
simulation execution.</p></li>
<li><p>Always confirm successful setup by running provided sample
simulations.</p></li>
</ul>
<hr></section><section><h2 class="section-heading" id="youre-all-set">✅ You’re All Set!<a class="anchor" aria-label="anchor" href="#youre-all-set"></a>
</h2>
<hr class="half-width">
<p>If you’ve completed the steps above and verified your dataset and
working directory, you’re ready to run the interactive guide script:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">./guide.sh</span></span></code></pre>
</div>
<p>This will walk you through the NGIAB setup and launch your first
simulation.</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-data-preparation"><p>Content from <a href="data-preparation.html">Data Preparation</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/data-preparation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How should I prepare my run directory?</li>
<li>What is the Data Preprocess tool?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Identify the required data structure of a NextGen run</li>
<li>Explain how the Data Preprocess tool interacts with NGIAB</li>
<li>Prepare data for an NextGen run</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="nextgen-run-directory-structure-ngen-run">NextGen Run Directory Structure (<code>ngen-run/</code>)<a class="anchor" aria-label="anchor" href="#nextgen-run-directory-structure-ngen-run"></a>
</h2>
<hr class="half-width">
<p>Running NextGen requires building a standard run directory complete
with only the necessary files. Below is an explanation of the
standard.</p>
<p>A NextGen run directory <code>ngen-run</code> contains the following
subfolders:</p>
<ul>
<li>
<code>config</code>: model configuration files and hydrofabric
configuration files. (required)</li>
<li>
<code>forcings</code>: catchment-level forcing timeseries files.
Forcing files contain variables like wind speed, temperature,
precipitation, and solar radiation. (required)</li>
<li>
<code>lakeout</code>: for t-route (optional)</li>
<li>
<code>metadata</code> programmatically generated folder used within
ngen. Do not edit this folder. (optional)</li>
<li>
<code>outputs</code>: This is where ngen will place the output
files. (required)</li>
<li>
<code>restart</code>: For restart files (optional)</li>
</ul>
<pre><code>ngen-run/
│
├── config/
│
├── forcings/
│
├── lakeout/
|
├── metadata/
│
├── outputs/
│
├── restart/</code></pre>
<div class="section level4">
<h4 id="configuration-directory-ngen-runconfig">Configuration directory <code>ngen-run/config/</code>
<a class="anchor" aria-label="anchor" href="#configuration-directory-ngen-runconfig"></a>
</h4>
<p>This folder contains the NextGen realization file, which serves as
the primary model configuration for the ngen framework. This file
specifies which models to run and with which parameters, run parameters
like date and time, and hydrofabric specifications.</p>
<p>Based on the models defined in the realization file, BMI
configuration files may be required. For those models that require
per-catchment configuration files, a folder will hold these files for
each model in <code>ngen-run/config/cat-config</code>. See the directory
structure convention below.</p>
<pre><code>ngen-run/
|
├── config/
|   │
|   ├── nextgen_09.gpkg
|   |
|   ├── realization.json
|   |
|   ├── ngen.yaml
|   |
|   ├── cat-config/
|   │   |
|   |   ├──PET/
|   │   |
|   |   ├──CFE/
|   │   |
|   |   ├──NOAH-OWP-M/</code></pre>
<p>NextGen requires a single geopackage file. This file is the <a href="https://mikejohnson51.github.io/hyAggregate/" class="external-link">hydrofabric
(Johnson, 2022)</a> (spatial data). An example geopackage can be found
on Lynker-Spatial <a href="https://www.lynker-spatial.com/data?path=hydrofabric%2Fv2.2%2F" class="external-link">here</a>.
Tools to subset a geopackage into a smaller domain can be found at <a href="https://github.com/LynkerIntel/hfsubset" class="external-link">Lynker’s
hfsubset</a>.</p>
</div>
</section><section><h2 class="section-heading" id="data-preprocess-tool">Data Preprocess Tool<a class="anchor" aria-label="anchor" href="#data-preprocess-tool"></a>
</h2>
<hr class="half-width">
<p><strong>The Data Preprocess tool streamlines data preparation for
NextGen simulations.</strong> This tool provides a graphical user
interface and a command line interface to prepare input data and run
simulations. A graphical user interface facilitates catchment and date
range selection options via an interactive map, simplifying the
subsetting of hydrofabrics, generation of forcings, and creation of
default NextGen realizations. While this module reduces procedural
complexity, it incorporates pre-defined assumptions that may limit user
flexibility in specific applications <a href="https://github.com/CIROH-UA/NGIAB_data_preprocess" class="external-link">(Cunningham,
2025)</a>.</p>
<div class="section level4">
<h4 id="installing-and-using-the-data-preprocess-tool">Installing and Using the Data Preprocess Tool<a class="anchor" aria-label="anchor" href="#installing-and-using-the-data-preprocess-tool"></a>
</h4>
<p>The Data Preprocess tool (like all of our software) is constantly
being updated and refined. To install and use the Data Preprocess tool,
follow the latest instructions <a href="https://github.com/CIROH-UA/NGIAB_data_preprocess" class="external-link">here</a>.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig3-1.png" alt="Figure 1" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 1: Map showing an example drainage basin.
View from the USGS National Map.</em></td>
</tr></tbody>
</table>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-4.png" alt="Figure 2" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 2: Map showing an example drainage basin.
View from the Data Preprocess tool. The highlighted region (light orange
area; downstream-most basin in pink) represents the specific study
basin, illustrating the river network (blue lines), sub-basins (orange),
and surrounding USGS gaging stations (black dots).</em></td>
</tr></tbody>
</table>
</div>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Using the Data Preprocess tool, you should be able to create a run
directory for your desired catchment that can be used with NGIAB. Try
out both the GUI and the CLI, and experiment with different arguments
and selection tools!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>ngen-run/</code> is the standard NextGen run directory,
containing the realization files that define models, parameters, and run
settings; forcing data; outputs; as well as the spatial
hydrofabric.</li>
<li>The Data Preprocess tool simplifies preparing data for NextGen by
offering a GUI and CLI for selecting catchments and date ranges,
subsetting hydrofabric data, generating forcing files, and creating
realization files.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-model-execution"><p>Content from <a href="model-execution.html">Model Execution</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/model-execution.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I execute a NextGen run?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Recognize methods to execute NextGen models</li>
<li>Run a NextGen simulation using NGIAB</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="model-execution-using-ngiab-container">Model Execution using NGIAB container<a class="anchor" aria-label="anchor" href="#model-execution-using-ngiab-container"></a>
</h2>
<hr class="half-width">
<p>To run a NextGen simulation, simply execute the following
commands:</p>
<pre><code>cd NextGen
git clone https://github.com/CIROH-UA/NGIAB-CloudInfra.git
cd NGIAB-CloudInfra
./guide.sh</code></pre>
<p>The interactive guide script <code>guide.sh</code> will prompt you to
enter input data pathways and allow you to select a computational mode
(serial or parallel processing). After the simulation is complete, the
guide script will give you the option to evaluate model predictions and
visualize results (discussed in the next two episodes).</p>
</section><section><h2 class="section-heading" id="model-execution-using-data-preprocess-tool">Model Execution using Data Preprocess tool<a class="anchor" aria-label="anchor" href="#model-execution-using-data-preprocess-tool"></a>
</h2>
<hr class="half-width">
<p>A secondary method for executing a NextGen simulation is by using the
Data Preprocess tool’s CLI. The <code>-a</code> argument in the command
will schedule an automatic execution of NGIAB after preprocessing
selected data. As this module is being updated constantly, check back on
its <a href="https://github.com/CIROH-UA/NGIAB_data_preprocess" class="external-link">GitHub
page</a> for the latest updates on its functionality.</p>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Use the guide script <code>guide.sh</code> to run a NextGen
simulation using your preprocessed data.</p>
<p>Extra Credit: Use the Data Preprocess tool to automatically execute a
NextGen run.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>To execute a NextGen simulation with full functionality, use the
interactive guide script <code>guide.sh</code> in the NGIAB
container.</li>
<li>A NextGen simulation can also be automatically executed
post-preprocessing using the Data Preprocess tool.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-evaluation"><p>Content from <a href="evaluation.html">Evaluation</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/evaluation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I use Tools for Exploratory Evaluation in Hydrologic Research
(TEEHR) to evaluate my NextGen models?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how TEEHR interacts with NGIAB</li>
<li>Evaluate a NextGen run using TEEHR</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="tools-for-exploratory-evaluation-in-hydrologic-research-teehr">Tools for Exploratory Evaluation in Hydrologic Research (TEEHR)<a class="anchor" aria-label="anchor" href="#tools-for-exploratory-evaluation-in-hydrologic-research-teehr"></a>
</h2>
<hr class="half-width">
<p>TEEHR is a Python-based package enabling iterative and exploratory
analysis of hydrologic model performance <a href="https://github.com/RTIInternational/teehr" class="external-link">(RTI International,
2025)</a>. The package facilitates custom metric definition,
bootstrapping implementation, and data manipulation via grouping and
filtering operations. TEEHR also provides tools to fetch the U.S.
Geological Survey (USGS) streamflow data and NWM gridded and point-based
retrospective and near real-time forecast data. This functionality
supports <strong>comprehensive model evaluation and uncertainty
analysis</strong>. NGIAB leverages TEEHR as a robust tool for
hydrological model evaluation, enabling researchers to assess
performance trends and investigate key drivers such as climate
variability, time-period influences, and basin characteristics <a href="https://github.com/CIROH-UA/ngiab-teehr" class="external-link">(CIROH, 2024)</a>.
Researchers can explore a comprehensive range of metrics, including
error statistics, skill scores, hydrologic signatures, and uncertainty
quantification.</p>
<div class="section level4">
<h4 id="teehr-folder-contents">TEEHR folder contents<a class="anchor" aria-label="anchor" href="#teehr-folder-contents"></a>
</h4>
<p>TEEHR consolidates data streams from the USGS and NWM into a uniform
folder structure, organizing the primary (observed) and secondary
(modeled) time-series to allow side‐by‐side visual comparisons of
hydrographs over the simulation intervals. Figure 1 shows the default
comparison of the outlet hydrograph simulation by the models specified
in the NextGen framework realization and the corresponding time series
from the NWM 3.0. While the default configuration produces this simple
comparative view, the TEEHR user documentation provides additional
examples of capabilities for customized plotting functions.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig5-1.png" alt="Figure 1" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 1: Comparison of the NextGen-based
simulation (labeled “ngen”; blue line) and the NWM time series (labeled
“nwm30_retrospective”; orange/gold line) for the same location. The
figure is automatically generated by the TEEHR-based analysis that
accompanies the <code>guide.sh</code> script included with NGIAB and is
named <code>timeseries_plot_streamflow_hourly_inst.html</code> in the
<code>teehr</code> folder.</em></td>
</tr></tbody>
</table>
<p>In addition to hydrograph visualization, TEEHR also calculates key
performance metrics such as Kling-Gupta Efficiency (KGE), Nash-Sutcliffe
Efficiency (NSE), and Relative Bias (RB) to quantify the accuracy of
model predictions against observed data (<a href="https://doi.org/10.1016/j.jhydrol.2009.08.003" class="external-link">Gupta et al.,
2009</a>; <a href="https://doi.org/10.1016/0022-1694(70)90255-6" class="external-link">Nash
and Sutcliffe, 1970</a>). These results are then stored in a
standardized output directory, enabling rapid assessments and
reproducible analyses. For instance, the <code>metrics.csv</code> file
in the TEEHR folder structure contains aggregated statistics for each
configuration, providing a transparent record of each model’s
performance.</p>
<p>Through this systematic approach, NGIAB and TEEHR together foster a
community modeling paradigm, wherein hydrologists and stakeholders can
easily inspect, compare, and refine model predictions in an open-source
environment.</p>
</div>
<div class="section level4">
<h4 id="using-teehr-with-ngiab">Using TEEHR with NGIAB<a class="anchor" aria-label="anchor" href="#using-teehr-with-ngiab"></a>
</h4>
<p>A TEEHR run is executed by default upon execution of the main NGIAB
guide script. A separate <code>runTeehr.sh</code> script is also
available in the NGIAB-CloudInfra repository.</p>
</div>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Go ahead and execute the TEEHR run using the guide script and explore
your TEEHR folder!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Tools for Exploratory Evaluation in Hydrologic Research (TEEHR) is a
Python-based backage for hydrologic model evaluation.</li>
<li>NGIAB uses TEEHR to assess model performance, comparing predictions
against USGS streamflow and NWM data and calculating performance
metrics.</li>
<li>TEEHR runs automatically with the main <code>guide.sh</code> NGIAB
script.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-visualization"><p>Content from <a href="visualization.html">Visualization</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/visualization.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I visualize my NextGen runs?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how the Data Visualizer complements NGIAB.</li>
<li>Use the Data Visualizer to visualize results of a NextGen run.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="data-visualizer">Data Visualizer<a class="anchor" aria-label="anchor" href="#data-visualizer"></a>
</h2>
<hr class="half-width">
<p>The Data Visualizer component developed using the Tethys Platform <a href="https://doi.org/10.1016/j.envsoft.2015.01.014" class="external-link">(Swain et al.,
2015)</a> complements NGIAB and its other extensions by providing a
robust environment for <strong>geospatial and time series visualization
of catchments and nexus points</strong>. Through a web-based
architecture, researchers can seamlessly explore hydrological data in a
spatiotemporal context, facilitating a deeper understanding of model
outputs and key hydrological processes <a href="https://github.com/CIROH-UA/ngiab-client" class="external-link">(CIROH, 2025)</a>. In
addition to standard map-based displays, this component also
<strong>supports the visualization of the TEEHR output</strong>,
including tabular metrics and interactive time series plots.</p>
<div class="section level4">
<h4 id="using-the-data-visualizer-with-ngiab">Using the Data Visualizer with NGIAB<a class="anchor" aria-label="anchor" href="#using-the-data-visualizer-with-ngiab"></a>
</h4>
<p>Like TEEHR, the Data Visualizer is automatically executed by default
upon execution of the main NGIAB guide script, <code>guide.sh</code>. A
separate <code>viewOnTethys.sh</code> script is also available in the
NGIAB-CloudInfra repository.</p>
<p>Once a simulation is complete, users can launch the Data Visualizer
through their web browser when prompted by the guide script. Through its
interactive tools, users can analyze geospatial patterns, temporal
trends, and overall model behavior. Although TEEHR’s outputs can be
displayed within the Data Visualizer, this tool is primarily designed to
provide a broad overview of model results. Users seeking TEEHR’s more
advanced analysis features can still access them outside the Data
Visualizer.</p>
<p>Figures 1 and 2 demonstrate several ways the Data Visualizer can be
used to visualize model outputs, including geopatial visualization for
nexus points, catchment-based visualization, and TEEHR time series
representation.</p>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig6-1.png" alt="Figure 1" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 1: A map showing the geospatial
visualization using the Data Visualizer within the Tethys framework for
an entire study area (Provo River near Woodland, UT).</em></td>
</tr></tbody>
</table>
<table class="table">
<colgroup><col width="100%"></colgroup>
<thead><tr class="header">
<th align="center"><img src="images/fig1-5.png" alt="alt text" class="figure"></th>
</tr></thead>
<tbody><tr class="odd">
<td align="center"><em>Figure 2: A map showing the geospatial
visualization using the Data Visualizer within the Tethys framework for
a selected outlet nexus point as well as displaying a time series plot
between observed (labeled “USGS”; blue line) and simulated (labeled
“ngen”; orange line) with the performance metrics (KGE, NSE, and
relative bias). The Visualizer can also show the performance of the NWM
3.0 compared to the observed time series.</em></td>
</tr></tbody>
</table>
</div>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Go ahead and run the Data Visualizer in the guide script, open it in
your browser, and explore the visualization of your NextGen run.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The Data Visualizer, built on the Tethys Platform, provides
interactive geospatial and time series visualization for NextGen model
outputs.</li>
<li>It complements NGIAB by offering a web-based environment to explore
catchments, nexus points, temporal patterns, and TEEHR outputs in your
simulation results.</li>
<li>The Data Visualizer runs automatically with the
<code>guide.sh</code> script.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-advanced-topics"><p>Content from <a href="advanced-topics.html">Advanced Topics</a></p>
<hr>
<p>Last updated on 2025-04-16 |

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/episodes/advanced-topics.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I build NGIAB locally?</li>
<li>How do I use NGIAB on an high-performance computing (HPC)
system?</li>
<li>How can I contribute to NGIAB?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Build a development version of NGIAB locally</li>
<li>Install and use NGIAB on an HPC</li>
<li>Explain the NGIAB community contribution process</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="building-ngiab-locally">Building NGIAB locally<a class="anchor" aria-label="anchor" href="#building-ngiab-locally"></a>
</h2>
<hr class="half-width">
<p>If you would like to build the NGIAB image locally instead of pulling
the latest image from the Docker remote registry, use the following
commands:</p>
<pre><code>cd docker
docker build -f Dockerfile -t awiciroh/ciroh-ngen-image:latest . --no-cache</code></pre>
</section><section><h2 class="section-heading" id="using-ngiab-on-high-performance-computing-hpc-environments">Using NGIAB on High-Performance Computing (HPC) Environments<a class="anchor" aria-label="anchor" href="#using-ngiab-on-high-performance-computing-hpc-environments"></a>
</h2>
<hr class="half-width">
<p>The most up-to-date information on installing NGIAB on an HPC can be
found <a href="https://github.com/CIROH-UA/NGIAB-HPCInfra" class="external-link">here</a>.
Other than a different installation process and the use of Singularity
instead of Docker, the workflow is the same to execute a NextGen run.
Tools like the Data Preprocessor, TEEHR, and the Data Visualizer are
still available. The NGIAB-HPCInfra contains its own interactive
<code>guide.sh</code> script, which allows users to specify input data
pathways and run configurations (serial or parallel), as well as trigger
the execution of TEEHR and the Data Visualizer.</p>
<div class="section level4">
<h4 id="singularity">Singularity<a class="anchor" aria-label="anchor" href="#singularity"></a>
</h4>
<p>NGIAB uses Singularity as its containerization platform for HPC
environments. Singularity enables secure execution of containerized
applications on multi-user HPC clusters. Key features of Singularity
include native HPC integration, which allows the execution of
containerized applications within existing batch job schedulers such as
SLURM (Simple Linux Utility for Resource Management) workload manager,
PBS (Portable Batch System) and LSF (Load Sharing Facility); enforced
security – it runs containers as non-root users, reducing security
risks; and seamless access to host file systems – it enables users to
interact with datasets and computational resources without additional
configuration directly. Singularity images, known as Singularity Image
Format (SIF) files, encapsulate the entire runtime environment, ensuring
full reproducibility of simulations. These images can be transferred
between systems without requiring reinstallation of software
dependencies, making Singularity a reliable choice for running
hydrologic models on large-scale computational infrastructures (Jajula
and Bangalore, 2024).</p>
</div>
<div class="section level4">
<h4 id="run-ngiab-on-pantarhei-hpc-singularity-version">Run NGIAB on Pantarhei HPC (Singularity Version)<a class="anchor" aria-label="anchor" href="#run-ngiab-on-pantarhei-hpc-singularity-version"></a>
</h4>
<p>This section explains how to run <strong>NextGen In A Box
(NGIAB)</strong> using <strong>Singularity</strong> on the
<strong>Pantarhei HPC system</strong> at the University of Alabama.</p>
<hr>
<div class="section level5">
<h5 id="log-into-pantarhei">1. Log Into Pantarhei<a class="anchor" aria-label="anchor" href="#log-into-pantarhei"></a>
</h5>
<p>Open a terminal and connect to the login node:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">ssh</span> <span class="op">&lt;</span>USERNAME<span class="op">&gt;</span>@pantarhei.ua.edu</span></code></pre>
</div>
<p>Replace <code>&lt;USERNAME&gt;</code> with your actual Pantarhei
username.</p>
<hr>
</div>
<div class="section level5">
<h5 id="request-a-compute-node-do-not-run-on-login-node">2. Request a Compute Node (Do NOT run on login node)<a class="anchor" aria-label="anchor" href="#request-a-compute-node-do-not-run-on-login-node"></a>
</h5>
<p>On the login node, request an interactive session:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">srun</span> <span class="at">--partition</span><span class="op">=</span>normal <span class="at">--nodes</span><span class="op">=</span>1 <span class="at">--ntasks</span><span class="op">=</span>1 <span class="at">--time</span><span class="op">=</span>02:00:00 <span class="at">--pty</span> bash</span></code></pre>
</div>
<p>Use the <code>normal</code> partition unless you require more time or
special resources.</p>
<hr>
</div>
<div class="section level5">
<h5 id="verify-that-singularity-is-available">3. Verify that Singularity is available:<a class="anchor" aria-label="anchor" href="#verify-that-singularity-is-available"></a>
</h5>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">singularity</span> <span class="at">--version</span></span></code></pre>
</div>
<hr>
</div>
<div class="section level5">
<h5 id="prepare-project-directory">4. Prepare Project Directory<a class="anchor" aria-label="anchor" href="#prepare-project-directory"></a>
</h5>
<p>Create the directory and move into it:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/NextGen/ngen-data</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="bu">cd</span> ~/NextGen/ngen-data</span></code></pre>
</div>
<hr>
</div>
<div class="section level5">
<h5 id="download-sample-dataset">5. Download Sample Dataset<a class="anchor" aria-label="anchor" href="#download-sample-dataset"></a>
</h5>
<p>Pick one of the sample datasets to download and extract:</p>
<div class="section level6">
<h6 id="option-1-awi-009-provo-river-ut">Option 1: AWI-009 (Provo River, UT)<a class="anchor" aria-label="anchor" href="#option-1-awi-009-provo-river-ut"></a>
</h6>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">wget</span> https://ciroh-ua-ngen-data.s3.us-east-2.amazonaws.com/AWI-009/AWI_16_10154200_009.tar.gz</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xf</span> AWI_16_10154200_009.tar.gz</span></code></pre>
</div>
<p>Other options: AWI-007 or AWI-008 can be used similarly.</p>
<hr>
</div>
</div>
<div class="section level5">
<h5 id="clone-the-ngiab-hpcinfra-repository">6. Clone the NGIAB-HPCInfra Repository<a class="anchor" aria-label="anchor" href="#clone-the-ngiab-hpcinfra-repository"></a>
</h5>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">cd</span> ~/NextGen</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/CIROH-UA/NGIAB-HPCInfra.git</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="bu">cd</span> NGIAB-HPCInfra</span></code></pre>
</div>
<blockquote>
<p>✅ <strong>Note:</strong> Always run <code>guide.sh</code> from
inside the <code>NGIAB-HPCInfra</code> folder.</p>
</blockquote>
<hr>
</div>
<div class="section level5">
<h5 id="run-the-ngiab-guide-script">7. Run the NGIAB Guide Script<a class="anchor" aria-label="anchor" href="#run-the-ngiab-guide-script"></a>
</h5>
<p>Make the script executable if needed:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">chmod</span> +x guide.sh</span></code></pre>
</div>
<p>Then run it:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">./guide.sh</span></span></code></pre>
</div>
<p>Follow the prompts:</p>
<ul>
<li><p>When asked <strong>“Do you want to use the same path?”</strong>,
type <code>n</code></p></li>
<li><p>Then enter the <strong>full absolute path</strong> to your
extracted dataset folder. Example:</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">/home/</span><span class="op">&lt;</span>username<span class="op">&gt;</span>/NextGen/ngen-data/AWI_16_10154200_009</span></code></pre>
</div>
<p>This folder must contain:</p>
<pre><code>forcings/
config/
outputs/
</code></pre>
<p>The script will:</p>
<ul>
<li><p>Detect system architecture</p></li>
<li><p>Pull the correct Singularity image</p></li>
<li><p>Mount your dataset</p></li>
<li>
<p>Allow running in:</p>
<ul>
<li><p>Serial mode</p></li>
<li><p>Parallel mode</p></li>
<li><p>Interactive container shell</p></li>
</ul>
</li>
</ul>
<hr>
</div>
<div class="section level5">
<h5 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h5>
<ul>
<li><p>Do not run the model or load modules on the login node.</p></li>
<li><p>All commands should be executed on a <strong>compute
node</strong>.</p></li>
<li><p>If output files don’t appear, double-check the input path and
folder structure.</p></li>
<li><p>If <code>outputs/</code> doesn’t exist, create an empty folder
manually before running.</p></li>
</ul>
</div>
</div>
</section><section><h2 class="section-heading" id="community-contributions-to-ngiabnextgen">Community Contributions to NGIAB/NextGen<a class="anchor" aria-label="anchor" href="#community-contributions-to-ngiabnextgen"></a>
</h2>
<hr class="half-width">
<p>The most up-to-date guidelines on community contributions for each
repository can be found on its respective GitHub page.</p>
<div class="section level4">
<h4 id="general-contribution-guidance">General contribution guidance<a class="anchor" aria-label="anchor" href="#general-contribution-guidance"></a>
</h4>
<ul>
<li>You can use the issue tracker on GitHub to suggest feature requests,
report bugs, or ask questions.</li>
<li>You can change the codebase through Git:
<ul>
<li>Create a fork</li>
<li>Clone the repository locally</li>
<li>Keep the fork and clone up-to-date</li>
<li>Create branches when you want to contribute</li>
<li>Make changes to the code</li>
<li>Commit to your local branch</li>
<li>Push commits to your GitHub fork</li>
<li>Create a pull request when the changes are ready to be
incorporated</li>
</ul>
</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="your-turn">Your Turn<a class="anchor" aria-label="anchor" href="#your-turn"></a>
</h2>
<hr class="half-width">
<p>Based on your own interests and use cases, try out some of these
options: - Build a development version of NGIAB locally - Install and
use NGIAB on your HPC environment - Contribute to NGIAB/NextGen!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>NGIAB can be built locally using Docker, allowing for development
without pulling from the remote registry.</li>
<li>NGIAB supports HPC environments through Singularity, not Docker, but
the workflow mirrors the local Docker use.</li>
<li>Community contribution guidelines are available in each repository’s
GitHub page.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/CIROH-UA/training-NGIAB-101/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/CIROH-UA/training-NGIAB-101/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/CIROH-UA/training-NGIAB-101/" class="external-link">Source</a></p>
				<p><a href="https://github.com/CIROH-UA/training-NGIAB-101/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:apatel54@ua.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://CIROH-UA.github.io/training-NGIAB-101/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "NextGen Framework, National WAter Model (NWM), Hydrologic Modeling, Community Modeling",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://CIROH-UA.github.io/training-NGIAB-101/aio.html",
  "identifier": "https://CIROH-UA.github.io/training-NGIAB-101/aio.html",
  "dateCreated": "2025-04-10",
  "dateModified": "2025-04-16",
  "datePublished": "2025-04-16"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

