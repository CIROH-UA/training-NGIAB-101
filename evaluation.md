---
title: "Evaluation"
teaching: 5
exercises: 10
---

:::::::::::::::::::::::::::::::::::::: questions 

- How do I use Tools for Exploratory Evaluation in Hydrologic Research (TEEHR) to evaluate my NextGen models?

::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::: objectives

- Explain how TEEHR interacts with NGIAB
- Evaluate a NextGen run using TEEHR

::::::::::::::::::::::::::::::::::::::::::::::::

## Tools for Exploratory Evaluation in Hydrologic Research (TEEHR)

TEEHR is a Python-based package enabling iterative and exploratory analysis of hydrologic model performance [(RTI International, 2025)](https://github.com/RTIInternational/teehr). The package facilitates custom metric definition, bootstrapping implementation, and data manipulation via grouping and filtering operations. TEEHR also provides tools to fetch the U.S. Geological Survey (USGS) streamflow data and NWM gridded and point-based retrospective and near real-time forecast data. This functionality supports **comprehensive model evaluation and uncertainty analysis**. NGIAB leverages TEEHR as a robust tool for hydrological model evaluation, enabling researchers to assess performance trends and investigate key drivers such as climate variability, time-period influences, and basin characteristics [(CIROH, 2024)](https://github.com/CIROH-UA/ngiab-teehr). Researchers can explore a comprehensive range of metrics, including error statistics, skill scores, hydrologic signatures, and uncertainty quantification. 

#### TEEHR folder contents

TEEHR consolidates data streams from the USGS and NWM into a uniform folder structure, organizing the primary (observed) and secondary (modeled) time-series to allow side‐by‐side visual comparisons of hydrographs over the simulation intervals. Figure 1 shows the default comparison of the outlet hydrograph simulation by the models specified in the NextGen framework realization and the corresponding time series from the NWM 3.0. While the default configuration produces this simple comparative view, the TEEHR user documentation provides additional examples of capabilities for customized plotting functions. 

| ![Figure 1](images/fig5-1.png) |
| :--: |
| *Figure 1: Comparison of the NextGen-based simulation (labeled "ngen"; blue line) and the NWM time series (labeled "nwm30_retrospective"; orange/gold line) for the same location. The figure is automatically generated by the TEEHR-based analysis that accompanies the `guide.sh` script included with NGIAB and is named `timeseries_plot_streamflow_hourly_inst.html` in the `teehr` folder.* |

In addition to hydrograph visualization, TEEHR also calculates key performance metrics such as Kling-Gupta Efficiency (KGE), Nash-Sutcliffe Efficiency (NSE), and Relative Bias (RB) to quantify the accuracy of model predictions against observed data ([Gupta et al., 2009](https://doi.org/10.1016/j.jhydrol.2009.08.003); [Nash and Sutcliffe, 1970](https://doi.org/10.1016/0022-1694(70)90255-6)). These results are then stored in a standardized output directory, enabling rapid assessments and reproducible analyses. For instance, the `metrics.csv` file in the TEEHR folder structure contains aggregated statistics for each configuration, providing a transparent record of each model’s performance. 

Through this systematic approach, NGIAB and TEEHR together foster a community modeling paradigm, wherein hydrologists and stakeholders can easily inspect, compare, and refine model predictions in an open-source environment.

#### Using TEEHR with NGIAB

A TEEHR run is executed by default upon execution of the main NGIAB guide script. A separate `runTeehr.sh` script is also available in the NGIAB-CloudInfra repository.

## Your Turn

Go ahead and execute the TEEHR run using the guide script and explore your TEEHR folder!

::::::::::::::::::::::::::::::::::::: keypoints 

- Tools for Exploratory Evaluation in Hydrologic Research (TEEHR) is a Python-based backage for hydrologic model evaluation.
- NGIAB uses TEEHR to assess model performance, comparing predictions against USGS streamflow and NWM data and calculating performance metrics.
- TEEHR runs automatically with the main `guide.sh` NGIAB script.

::::::::::::::::::::::::::::::::::::::::::::::::

[r-markdown]: https://rmarkdown.rstudio.com/
